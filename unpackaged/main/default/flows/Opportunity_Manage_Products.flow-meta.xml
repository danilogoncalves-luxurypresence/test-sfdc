<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <description>saves all changes to the database so we can do our final checks</description>
        <name>Commit_Transaction</name>
        <label>Commit Transaction</label>
        <locationX>682</locationX>
        <locationY>1784</locationY>
        <actionName>c:CommitTransaction</actionName>
        <actionType>component</actionType>
        <connector>
            <targetReference>GetUpdatedLineItems</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <nameSegment>c:CommitTransaction</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <description>this apex class converts the selected choices on the screen into a variable that can be looped through in the flow</description>
        <name>ParseChoiceSelection</name>
        <label>ParseChoiceSelection</label>
        <locationX>1225</locationX>
        <locationY>440</locationY>
        <actionName>MultiSelectFlowValues</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>LoopProducts</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>values</name>
            <value>
                <elementReference>Select_Add_Ons</elementReference>
            </value>
        </inputParameters>
        <nameSegment>MultiSelectFlowValues</nameSegment>
        <outputParameters>
            <assignToReference>AllIDsForLoop</assignToReference>
            <name>output</name>
        </outputParameters>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <description>this apex class converts the selected choices on the screen into a variable that can be looped through in the flow</description>
        <name>ParseDiscountChoiceSelection</name>
        <label>ParseDiscountChoiceSelection</label>
        <locationX>1201</locationX>
        <locationY>590</locationY>
        <actionName>MultiSelectFlowValues</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>LoopDiscountProducts</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>values</name>
            <value>
                <elementReference>Select_Add_Ons_For_Discount</elementReference>
            </value>
        </inputParameters>
        <nameSegment>MultiSelectFlowValues</nameSegment>
        <outputParameters>
            <assignToReference>AllIDsForDiscountLoop</assignToReference>
            <name>output</name>
        </outputParameters>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>AddDiscountToCollection</name>
        <label>AddDiscountToCollection</label>
        <locationX>1251</locationX>
        <locationY>1331</locationY>
        <assignmentItems>
            <assignToReference>vOpptyProductCollectionForDiscount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>vOpptyProductForDiscount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopDiscountProducts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddToCollection</name>
        <label>AddToCollection</label>
        <locationX>1472</locationX>
        <locationY>708</locationY>
        <assignmentItems>
            <assignToReference>vOpptyProductCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>vOpptyProduct</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopProducts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>BuildDiscountOpptyProductLineItemRecord</name>
        <label>BuildDiscountOpptyProductLineItemRecord</label>
        <locationX>1355</locationX>
        <locationY>1493</locationY>
        <assignmentItems>
            <assignToReference>vOpptyProductForDiscount.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetAddOnLineItem.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpptyProductForDiscount.Discount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Discount_for_Add_Ons_Selected</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddDiscountToCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>BuildDiscountString</name>
        <label>BuildDiscountString</label>
        <locationX>1449</locationX>
        <locationY>1692</locationY>
        <assignmentItems>
            <assignToReference>vCommaSeperatedDiscountString</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fConstructDiscountString</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>BuildDiscountOpptyProductLineItemRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>BuildOpptyProductLineItemRecord</name>
        <label>BuildOpptyProductLineItemRecord</label>
        <locationX>1606</locationX>
        <locationY>787</locationY>
        <assignmentItems>
            <assignToReference>vOpptyProduct.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetOpptyRecord.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpptyProduct.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopProducts</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpptyProduct.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AddOn_Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpptyProduct.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetSingleProductPriceBookEntry.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpptyProduct.Discount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fDiscountForAddOn</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddToCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>BuildString</name>
        <label>BuildString</label>
        <locationX>1854</locationX>
        <locationY>1029</locationY>
        <assignmentItems>
            <assignToReference>vCommaSeperatedString</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fConstructString</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LineItemScreen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Counter</name>
        <label>Increment Counter</label>
        <locationX>2032</locationX>
        <locationY>636</locationY>
        <assignmentItems>
            <assignToReference>vCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetSingleProductPriceBookEntry</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>IncrementIDXCounter</name>
        <label>IncrementIDXCounter</label>
        <locationX>1178</locationX>
        <locationY>2298</locationY>
        <assignmentItems>
            <assignToReference>vIDXToolQuantityCount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>LoopLineItems.Quantity</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopLineItems</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_DiscountCount</name>
        <label>Set DiscountCount</label>
        <locationX>1016</locationX>
        <locationY>1027</locationY>
        <assignmentItems>
            <assignToReference>vDiscountToAddCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>vOpptyProductCollectionForDiscount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Confirmation</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetNewOneTimeFee</name>
        <label>SetNewOneTimeFee</label>
        <locationX>831</locationX>
        <locationY>1189</locationY>
        <assignmentItems>
            <assignToReference>GetOneTimeFeeOpptyLineItem.Discount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fDiscountForOneTimeFee</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOneTimeFeeOpptyLineItem.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetOneTimeListPrice.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateNewOneTimeFeeLine</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>once the user leaves the plan selection screen we do not allow them to go back and change....for some reason the defaults for plan fees do not get updated if it returns and then is changed</description>
        <name>SetOpptyFields</name>
        <label>SetOpptyFields</label>
        <locationX>879</locationX>
        <locationY>678</locationY>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Tier_Plan__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Tier_Plan</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Website_Design__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Website_Design</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Subscription_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Subscription_Start_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Contract_Term_Months__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contract_Term_Months</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Design_Template__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Design_Template</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Beta_user__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>In_App_Onboarding</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetOpptyRecord.Subscription_Fee_Payment_Term__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Subscription_Fee_Payment_Term</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateOpptyFields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>set the variable so that it won&#39;t change during rest of flow - memorializes the user selected value</description>
        <name>SetPlanChangeIndicator</name>
        <label>SetPlanChangeIndicator</label>
        <locationX>617</locationX>
        <locationY>529</locationY>
        <assignmentItems>
            <assignToReference>vSamePlan</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fSamePlan</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vSameWebsiteDesign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fSameWebsiteDesign</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetPlanListPrice</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetPlanDiscount</name>
        <label>SetPlanDiscount</label>
        <locationX>835</locationX>
        <locationY>1579</locationY>
        <assignmentItems>
            <assignToReference>GetPlanLineItem.Discount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fDiscountForPlan</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetPlanLineItem.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetPlanListPrice.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdatePlanDiscount</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>Base</name>
        <choiceText>Base</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Base</stringValue>
        </value>
    </choices>
    <choices>
        <name>Brand</name>
        <choiceText>Brand+</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Brand+</stringValue>
        </value>
    </choices>
    <choices>
        <name>Enterprise</name>
        <choiceText>Enterprise</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Enterprise</stringValue>
        </value>
    </choices>
    <choices>
        <name>Growth</name>
        <choiceText>Growth+</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Growth+</stringValue>
        </value>
    </choices>
    <choices>
        <name>Launch</name>
        <choiceText>Launch+</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Launch+</stringValue>
        </value>
    </choices>
    <choices>
        <name>LeadsPro</name>
        <choiceText>Leads Pro</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Leads Pro</stringValue>
        </value>
    </choices>
    <choices>
        <name>NoChoice</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>Premium</name>
        <choiceText>Premium+</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Premium+</stringValue>
        </value>
    </choices>
    <choices>
        <name>SEOPro</name>
        <choiceText>SEO Pro</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SEO Pro</stringValue>
        </value>
    </choices>
    <choices>
        <name>YesChoice</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </choices>
    <constants>
        <name>cHideFeatureOnScreens</name>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </constants>
    <constants>
        <description>minimum price that a plan that includes Ad Spend can be...b/c we allocate this fixed amount to Ad Spend for those plans</description>
        <name>cPlanWithAdSpendMinPrice</name>
        <dataType>Currency</dataType>
        <value>
            <numberValue>500.0</numberValue>
        </value>
    </constants>
    <constants>
        <name>cPriceBookID_Partner</name>
        <dataType>String</dataType>
        <value>
            <stringValue>01sEY00000013fNYAQ</stringValue>
        </value>
    </constants>
    <constants>
        <name>cPriceBookID_Standard</name>
        <dataType>String</dataType>
        <value>
            <stringValue>01s5f00000453KtAAI</stringValue>
        </value>
    </constants>
    <decisions>
        <name>AddOnChecker1</name>
        <label>AddOnChecker1</label>
        <locationX>2025</locationX>
        <locationY>409</locationY>
        <defaultConnector>
            <targetReference>LoopProducts</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No AddOns Selected</defaultConnectorLabel>
        <rules>
            <name>AddOnsSelected1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Increment_Counter</targetReference>
            </connector>
            <label>AddOnsSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>AddOnChecker2</name>
        <label>AddOnChecker2</label>
        <locationX>720</locationX>
        <locationY>879</locationY>
        <defaultConnector>
            <targetReference>FeeChecker</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AddOnsSelected2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddAddOnLineItems</targetReference>
            </connector>
            <label>AddOnsSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>AddOnPriceValidator</name>
        <label>AddOnPriceValidator</label>
        <locationX>1846</locationX>
        <locationY>714</locationY>
        <defaultConnector>
            <targetReference>BuildOpptyProductLineItemRecord</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AddOnPriceTooHigh</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSingleProductPriceBookEntry.UnitPrice</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>AddOn_Sales_Price</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AddOn_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddOnInvalidScreen</targetReference>
            </connector>
            <label>AddOnPriceTooHigh</label>
        </rules>
        <rules>
            <name>AdSpendDiscountEntered</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSingleProductPriceBookEntry.UnitPrice</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>AddOn_Sales_Price</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AddOn_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetSingleProductPriceBookEntry.Product2.AddOn_RollUp_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ad Spend</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AdSpendDiscountScreen</targetReference>
            </connector>
            <label>AdSpendDiscountEntered</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckIfUserHasDiscountPermission</name>
        <label>CheckIfUserHasDiscountPermission</label>
        <locationX>1553</locationX>
        <locationY>254</locationY>
        <defaultConnector>
            <targetReference>ParseChoiceSelection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>BelowFloorAndNoPermission</name>
            <conditionLogic>1 and ((2 and 4) or (3 and 5))</conditionLogic>
            <conditions>
                <leftValueReference>GetDiscountPermissionForUser</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>One_Time_Fee</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>GetOneTimeListPrice.Discount_Approval_Floor__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>GetPlanListPrice.Discount_Approval_Floor__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>One_Time_Fee</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>DiscountApproval</targetReference>
            </connector>
            <label>BelowFloorAndNoPermission</label>
        </rules>
    </decisions>
    <decisions>
        <name>DiscountAddOnChecker</name>
        <label>DiscountAddOnChecker</label>
        <locationX>368</locationX>
        <locationY>1609</locationY>
        <defaultConnector>
            <targetReference>Commit_Transaction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AddOnDiscount</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Discount_for_Add_Ons_Selected</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>DiscountCountChecker</targetReference>
            </connector>
            <label>AddOnDiscount</label>
        </rules>
    </decisions>
    <decisions>
        <name>DiscountChecker</name>
        <label>DiscountChecker</label>
        <locationX>436</locationX>
        <locationY>1258</locationY>
        <defaultConnector>
            <targetReference>DiscountAddOnChecker</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DiscountSelected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>DiscountPlanChecker</targetReference>
            </connector>
            <label>DiscountSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>DiscountCountChecker</name>
        <label>DiscountCountChecker</label>
        <locationX>368</locationX>
        <locationY>1905</locationY>
        <defaultConnector>
            <targetReference>Commit_Transaction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DiscountsToAdd</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vDiscountToAddCount</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateDiscountLineItems</targetReference>
            </connector>
            <label>DiscountsToAdd</label>
        </rules>
    </decisions>
    <decisions>
        <name>DiscountPlanChecker</name>
        <label>DiscountPlanChecker</label>
        <locationX>616</locationX>
        <locationY>1419</locationY>
        <defaultConnector>
            <targetReference>DiscountAddOnChecker</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DiscountPlan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetPlanLineItem</targetReference>
            </connector>
            <label>DiscountPlan</label>
        </rules>
    </decisions>
    <decisions>
        <name>DiscountValidation</name>
        <label>DiscountValidation</label>
        <locationX>790</locationX>
        <locationY>259</locationY>
        <defaultConnector>
            <targetReference>DiscountValidationScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>InvalidDiscounts</defaultConnectorLabel>
        <rules>
            <name>PlanWithAdSpendGTMinValue</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>cPlanWithAdSpendMinPrice</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetPlanListPrice.Product2.Plan_Includes_Ad_Spend__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PlanPriceTooLowScreen</targetReference>
            </connector>
            <label>PlanWithAdSpendGTMinValue</label>
        </rules>
        <rules>
            <name>ValidDiscounts</name>
            <conditionLogic>(1 AND (2 OR 3)) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Discount_for_Add_Ons_Selected</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Plan_FeePriceValidator</targetReference>
            </connector>
            <label>ValidDiscounts</label>
        </rules>
    </decisions>
    <decisions>
        <name>FeeChecker</name>
        <label>FeeChecker</label>
        <locationX>436</locationX>
        <locationY>1040</locationY>
        <defaultConnector>
            <targetReference>DiscountChecker</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>FeeSelected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Do_you_want_to_adjust_the_plan_setup_fee</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetOneTimeFeeOpptyLineItem</targetReference>
            </connector>
            <label>FeeSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>IDXToolChecker</name>
        <label>IDXToolChecker</label>
        <locationX>1284</locationX>
        <locationY>2104</locationY>
        <defaultConnector>
            <targetReference>LoopLineItems</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IDX_Product</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LoopLineItems.Product2.Family</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Add On</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoopLineItems.Product2.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>IDX</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IncrementIDXCounter</targetReference>
            </connector>
            <label>IDX Product</label>
        </rules>
    </decisions>
    <decisions>
        <name>MLSBoardChecker</name>
        <label>MLSBoardChecker</label>
        <locationX>1025</locationX>
        <locationY>1850</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>No_MATCH</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fMLSBoardIDXToolMATCH</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>MLS_IDXCheckerScreen</targetReference>
            </connector>
            <label>No MATCH</label>
        </rules>
    </decisions>
    <decisions>
        <description>user entered price should never be greater than list price --- this would cause Discount to be greater than 100%</description>
        <name>Plan_FeePriceValidator</name>
        <label>Plan&amp;FeePriceValidator</label>
        <locationX>1039</locationX>
        <locationY>314</locationY>
        <defaultConnector>
            <targetReference>ParseChoiceSelection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>PlanAndFeeOK</defaultConnectorLabel>
        <rules>
            <name>PlanorFeeTooHigh</name>
            <conditionLogic>(1 and 3) or (2 and 4)</conditionLogic>
            <conditions>
                <leftValueReference>GetPlanListPrice.UnitPrice</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Plan_Sales_Price</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetOneTimeListPrice.UnitPrice</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>One_Time_Fee</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Plan_Sales_Price</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>One_Time_Fee</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PlanFeeInvalidScreen</targetReference>
            </connector>
            <label>PlanorFeeTooHigh</label>
        </rules>
    </decisions>
    <decisions>
        <name>RecordFoundChecker</name>
        <label>RecordFoundChecker</label>
        <locationX>1662</locationX>
        <locationY>1518</locationY>
        <defaultConnector>
            <targetReference>LoopDiscountProducts</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>RecordFound</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetAddOnLineItem</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>BuildDiscountString</targetReference>
            </connector>
            <label>RecordFound</label>
        </rules>
    </decisions>
    <description>===pre-ChargeBees===
Presents a screen to user to select a tier plan and fees on opportunity</description>
    <dynamicChoiceSets>
        <name>AddOnPriceBookProductEntries</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>fPriceBookID_CurrentOppty</elementReference>
            </value>
        </filters>
        <filters>
            <field>Ala_Carte__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Tier_Plan_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Tier_Plans_Available__c</field>
            <operator>Contains</operator>
            <value>
                <elementReference>Tier_Plan</elementReference>
            </value>
        </filters>
        <object>PricebookEntry</object>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>DesignTemplateChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Design_Template__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>InAppChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Beta_user__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>StageNamesChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>StageName</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>SubscriptionFeePaymentTermChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Subscription_Fee_Payment_Term__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>TermChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Contract_Term_Months__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>TierPlanChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Tier_Plan__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>WebsiteChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Website_Design__c</picklistField>
        <picklistObject>Opportunity</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>fAddOnPriceTimesQuantity</name>
        <dataType>Currency</dataType>
        <expression>{!AddOn_Quantity} * {!AddOn_Sales_Price}</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>fConstructDiscountString</name>
        <dataType>String</dataType>
        <expression>/* if statement takes care of NOT adding a duplicate product code value to the string */
If (Contains ( {!vCommaSeperatedDiscountString}, {!GetSingleDiscountProductPriceBookEntry.Name}), 
   {!vCommaSeperatedDiscountString},
   if (IsBlank ({!vCommaSeperatedDiscountString}),
     {!GetSingleDiscountProductPriceBookEntry.Name},  /* deals with first value - no separator needed */
      {!vCommaSeperatedDiscountString} + &quot;, &quot; + {!GetSingleDiscountProductPriceBookEntry.Name}
   )
)</expression>
    </formulas>
    <formulas>
        <name>fConstructString</name>
        <dataType>String</dataType>
        <expression>/* if statement takes care of NOT adding a duplicate product code value to the string */
If (Contains ( {!vCommaSeperatedString}, {!GetSingleProductPriceBookEntry.Name}), 
   {!vCommaSeperatedString},
   if (IsBlank ({!vCommaSeperatedString}),
     {!GetSingleProductPriceBookEntry.Name},  /* deals with first value - no separator needed */
      {!vCommaSeperatedString} + &quot;, &quot; + {!GetSingleProductPriceBookEntry.Name}
   )
)</expression>
    </formulas>
    <formulas>
        <name>fDiscountApproverText</name>
        <dataType>String</dataType>
        <expression>If (IsBlank ({!GetDiscountPermissionForUser.Id}), &quot;No&quot;, &quot;Yes&quot;)</expression>
    </formulas>
    <formulas>
        <name>fDiscountForAddOn</name>
        <dataType>Number</dataType>
        <expression>100 * (1 - ({!AddOn_Sales_Price}/{!GetSingleProductPriceBookEntry.UnitPrice}))</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>fDiscountForOneTimeFee</name>
        <dataType>Number</dataType>
        <expression>100 * (1 - ({!One_Time_Fee}/{!GetOneTimeListPrice.UnitPrice}))</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>fDiscountForPlan</name>
        <dataType>Number</dataType>
        <expression>100 * (1 - ({!Plan_Sales_Price} / {!GetPlanListPrice.UnitPrice}))</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>fMLSBoardIDXToolMATCH</name>
        <dataType>Boolean</dataType>
        <expression>If ({!GetOpptyRecord.Number_of_MLS_Boards__c} = {!vIDXToolQuantityCount},
   TRUE,
   FALSE
)</expression>
    </formulas>
    <formulas>
        <name>fPartnershipDeal</name>
        <dataType>Boolean</dataType>
        <expression>If (IsBlank (Text({!GetOpptyRecord.Account.Partnership_Organization__c})) || 
   Text ({!GetOpptyRecord.Account.Partnership_Organization__c}) = &quot;N/A&quot;, 
   FALSE,
   TRUE)</expression>
    </formulas>
    <formulas>
        <name>fPartnershipHeaderText</name>
        <dataType>String</dataType>
        <expression>If ({!fPartnershipDeal}, 
   &quot;PARTNER&quot;,
   &quot;STANDARD&quot;
   )</expression>
    </formulas>
    <formulas>
        <name>fPlanChangeText</name>
        <dataType>String</dataType>
        <expression>If ({!fSamePlan},
&quot;(unchanged)&quot;,
&quot;(updated)&quot;
)</expression>
    </formulas>
    <formulas>
        <name>fPriceBookID_CurrentOppty</name>
        <dataType>String</dataType>
        <expression>If ({!fPartnershipDeal}, 
   {!cPriceBookID_Partner},
   {!cPriceBookID_Standard}
   )</expression>
    </formulas>
    <formulas>
        <name>fSamePlan</name>
        <dataType>Boolean</dataType>
        <expression>If (Text ({!GetOpptyRecord.Tier_Plan__c}) = {!Tier_Plan}, TRUE, FALSE)</expression>
    </formulas>
    <formulas>
        <name>fSameWebsiteDesign</name>
        <dataType>Boolean</dataType>
        <expression>If (Text ({!GetOpptyRecord.Website_Design__c}) = {!Website_Design}, TRUE, FALSE)</expression>
    </formulas>
    <formulas>
        <name>fWebsiteDesignChangeText</name>
        <dataType>String</dataType>
        <expression>If ({!fSameWebsiteDesign},
&quot;(unchanged)&quot;,
&quot;(updated)&quot;
)</expression>
    </formulas>
    <formulas>
        <description>anything other than Pro should be considered &quot;Custom&quot; for searching in the product name for proper plan and one-time fee</description>
        <name>fWebsiteDesignSearchText</name>
        <dataType>String</dataType>
        <expression>If ({!Website_Design} &lt;&gt; &quot;Pro&quot;, &quot;Custom&quot;, {!Website_Design})</expression>
    </formulas>
    <interviewLabel>Opportunity Manage Products {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity Manage Products</label>
    <loops>
        <name>LoopDiscountProducts</name>
        <label>LoopDiscountProducts</label>
        <locationX>1478</locationX>
        <locationY>1206</locationY>
        <collectionReference>AllIDsForDiscountLoop</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>GetSingleDiscountProductPriceBookEntry</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Set_DiscountCount</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>LoopLineItems</name>
        <label>LoopLineItems</label>
        <locationX>1036</locationX>
        <locationY>2033</locationY>
        <collectionReference>GetUpdatedLineItems</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>IDXToolChecker</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>MLSBoardChecker</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loop through selected AddOns and construct a collection variable AND increment counters and values</description>
        <name>LoopProducts</name>
        <label>LoopProducts</label>
        <locationX>1689</locationX>
        <locationY>457</locationY>
        <collectionReference>AllIDsForLoop</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AddOnChecker1</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>ParseDiscountChoiceSelection</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>AddAddOnLineItems</name>
        <label>AddAddOnLineItems</label>
        <locationX>443</locationX>
        <locationY>827</locationY>
        <connector>
            <targetReference>FeeChecker</targetReference>
        </connector>
        <inputReference>vOpptyProductCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>GetAddOnLineItem</name>
        <label>GetAddOnLineItem</label>
        <locationX>1853</locationX>
        <locationY>1402</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>RecordFoundChecker</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>PricebookEntryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetSingleDiscountProductPriceBookEntry.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetDiscountPermissionForUser</name>
        <label>GetDiscountPermissionForUser</label>
        <locationX>782</locationX>
        <locationY>497</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ConstructDealPage</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AssigneeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>PermissionSetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetDiscountPermissionSet.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PermissionSetAssignment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetDiscountPermissionSet</name>
        <label>GetDiscountPermissionSet</label>
        <locationX>647</locationX>
        <locationY>351</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetDiscountPermissionForUser</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AvoidDiscountFloor</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PermissionSet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Assumption is that there is only a single one time setup fee line item per opportunity</description>
        <name>GetOneTimeFeeOpptyLineItem</name>
        <label>GetOneTimeFeeOpptyLineItem</label>
        <locationX>656</locationX>
        <locationY>1112</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SetNewOneTimeFee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>One_Time_Fee__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetOneTimeListPrice</name>
        <label>GetOneTimeListPrice</label>
        <locationX>577</locationX>
        <locationY>167</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetDiscountPermissionSet</targetReference>
        </connector>
        <filterLogic>1 AND 2 AND 3 AND 4 and (5 OR 6) and 7</filterLogic>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>fPriceBookID_CurrentOppty</elementReference>
            </value>
        </filters>
        <filters>
            <field>One_Time_Fee__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <elementReference>Tier_Plan</elementReference>
            </value>
        </filters>
        <filters>
            <field>Primary_Plan_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <elementReference>Website_Design</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <elementReference>fWebsiteDesignSearchText</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetOpptyRecord</name>
        <label>GetOpptyRecord</label>
        <locationX>385</locationX>
        <locationY>428</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetTierPlan_WebsiteType</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Assumption is that there is only a single one time setup fee line item per opportunity</description>
        <name>GetPlanLineItem</name>
        <label>GetPlanLineItem</label>
        <locationX>835</locationX>
        <locationY>1416</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SetPlanDiscount</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Tier_Plan_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>updated to remove two conditions due to removing the need for having a pair of plan products: one with (Pro) and one with (Custom) --- this was in place b/c there were two different list prices for plan/website design combination and this is no longer the case...It is the case for One Time Setup Fee.

If we need to put it back in place do the following:
1) Add Name Contains Website_Design
2) Add Name Contains fWebsiteDesignSearchText
3) change condition requirements to Custom ( 1 and 2 and 3 and 4 and (5 or 6) )</description>
        <name>GetPlanListPrice</name>
        <label>GetPlanListPrice</label>
        <locationX>507</locationX>
        <locationY>354</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetOneTimeListPrice</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>fPriceBookID_CurrentOppty</elementReference>
            </value>
        </filters>
        <filters>
            <field>Tier_Plan_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <elementReference>Tier_Plan</elementReference>
            </value>
        </filters>
        <filters>
            <field>Primary_Plan_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSingleDiscountProductPriceBookEntry</name>
        <label>GetSingleDiscountProductPriceBookEntry</label>
        <locationX>1853</locationX>
        <locationY>1204</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetAddOnLineItem</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LoopDiscountProducts</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSingleProductPriceBookEntry</name>
        <label>GetSingleProductPriceBookEntry</label>
        <locationX>2086</locationX>
        <locationY>859</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>BuildString</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LoopProducts</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Need to do this loop vs. relying on the line rollUp flow populating the Number of IDX Product Lines in time...so do the count here as well.</description>
        <name>GetUpdatedLineItems</name>
        <label>GetUpdatedLineItems</label>
        <locationX>855</locationX>
        <locationY>1957</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LoopLineItems</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>UpdateDiscountLineItems</name>
        <label>UpdateDiscountLineItems</label>
        <locationX>621</locationX>
        <locationY>2048</locationY>
        <connector>
            <targetReference>Commit_Transaction</targetReference>
        </connector>
        <inputReference>vOpptyProductCollectionForDiscount</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateNewOneTimeFeeLine</name>
        <label>UpdateNewOneTimeFeeLine</label>
        <locationX>653</locationX>
        <locationY>1249</locationY>
        <connector>
            <targetReference>DiscountChecker</targetReference>
        </connector>
        <inputReference>GetOneTimeFeeOpptyLineItem</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>This update relies on other flows to properly add the products that are included with the tier plan AND if the tier plan is changed the other flow will delete all line items are start over</description>
        <name>UpdateOpptyFields</name>
        <label>UpdateOpptyFields</label>
        <locationX>729</locationX>
        <locationY>677</locationY>
        <connector>
            <targetReference>AddOnChecker2</targetReference>
        </connector>
        <inputReference>GetOpptyRecord</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdatePlanDiscount</name>
        <label>UpdatePlanDiscount</label>
        <locationX>627</locationX>
        <locationY>1572</locationY>
        <connector>
            <targetReference>DiscountAddOnChecker</targetReference>
        </connector>
        <inputReference>GetPlanLineItem</inputReference>
    </recordUpdates>
    <screens>
        <name>AddOnInvalidScreen</name>
        <label>AddOnInvalidScreen</label>
        <locationX>1907</locationX>
        <locationY>508</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>AddOnPriceIvalidMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(255, 0, 0);&quot;&gt;The sales price you entered for either the add-on is higher than the list price.  Please click Previous and adjust the value.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>AdSpendDiscountScreen</name>
        <label>AdSpendDiscountScreen</label>
        <locationX>1634</locationX>
        <locationY>645</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>AdSpendDiscountErrorMsg</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(255, 0, 0);&quot;&gt;You cannot discount Ad Spend addOns.  The sales price you entered must equal the list price.  Please click Previous and adjust the value.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Confirmation</name>
        <label>Confirmation</label>
        <locationX>1015</locationX>
        <locationY>830</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>SetOpptyFields</targetReference>
        </connector>
        <fields>
            <name>ConfirmationSectionDealSummary</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 18px;&quot;&gt;CONFIRMATION SCREEN&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;You are about to update your opportunity with the following details:  &lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;OPPORTUNITY SUMMARY&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Account Name: {!GetOpptyRecord.Account.Name}&lt;/p&gt;&lt;p&gt;Opportunity Name: {!GetOpptyRecord.Name}&lt;/p&gt;&lt;p&gt;Tier Plan: {!Tier_Plan} &lt;strong&gt;{!fPlanChangeText}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Website Design: {!Website_Design} &lt;strong&gt;{!fWebsiteDesignChangeText}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>ConfirmationSectionAddOn</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(0, 0, 0);&quot;&gt;ADD-ONS ADDED to OPPORTUNITY&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Number of AddOn Products: {!vCounter}&lt;/p&gt;&lt;p&gt;AddOn Products: {!vCommaSeperatedString}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Yes</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ConfirmationScreenPlanFee</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;UPDATED PLAN FEE&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Plan Fee: {!Plan_Sales_Price}&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;font-size: 10px;&quot;&gt;(List Price = &lt;/em&gt;&lt;em style=&quot;color: rgb(68, 68, 68); font-size: 10px;&quot;&gt;${!GetPlanListPrice.UnitPrice}&lt;/em&gt;&lt;em style=&quot;font-size: 10px;&quot;&gt;)&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Do_you_want_to_adjust_the_plan_setup_fee</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Yes</stringValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>Plan_Sales_Price</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ConfirmationSectionFee</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;UPDATED PLAN ONE TIME FEE&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;One-Time Fee: {!One_Time_Fee}&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;font-size: 10px;&quot;&gt;(List Price = &lt;/em&gt;&lt;em style=&quot;color: rgb(68, 68, 68); font-size: 10px;&quot;&gt;${!GetOneTimeListPrice.UnitPrice}&lt;/em&gt;&lt;em style=&quot;font-size: 10px;&quot;&gt;)&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Do_you_want_to_adjust_the_plan_setup_fee</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Yes</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ConfirmationSectionDiscounts</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;DISCOUNTS APPLIED to SELECTED ADD-ONS&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Number of AddOns Discounted: {!vDiscountToAddCount}&lt;/p&gt;&lt;p&gt;AddOn Products: {!vCommaSeperatedDiscountString}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Yes</stringValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>Discount_for_Add_Ons_Selected</leftValueReference>
                    <operator>NotEqualTo</operator>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ConfirmationSectionReqFields</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;REQUIRED FIELDS&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Subscription_Start_Date</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>GetOpptyRecord.Subscription_Start_Date__c</elementReference>
            </defaultValue>
            <fieldText>Subscription Start Date</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Contract_Term_Months</name>
            <choiceReferences>TermChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>GetOpptyRecord.Contract_Term_Months__c</elementReference>
            </defaultValue>
            <fieldText>Contract Term (Months)</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Subscription_Fee_Payment_Term</name>
            <choiceReferences>SubscriptionFeePaymentTermChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>GetOpptyRecord.Subscription_Fee_Payment_Term__c</elementReference>
            </defaultValue>
            <fieldText>Subscription Fee Payment Term</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Design_Template</name>
            <choiceReferences>DesignTemplateChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>GetOpptyRecord.Design_Template__c</elementReference>
            </defaultValue>
            <fieldText>Design Template</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>In_App_Onboarding</name>
            <choiceReferences>InAppChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>GetOpptyRecord.Beta_user__c</elementReference>
            </defaultValue>
            <fieldText>In-App Onboarding</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>InAppOnboardingFooter</name>
            <fieldText>&lt;p&gt;&lt;em&gt;Website Design is Pro, typically In-App Onboarding is set to &quot;Yes&quot;&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Website_Design</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Pro</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>FooterMessage</name>
            <fieldText>&lt;p&gt;&lt;em style=&quot;color: rgb(68, 68, 68);&quot;&gt;Please click Confirm to continue and exit&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Confirm</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ConstructDealPage</name>
        <label>ConstructDealPage</label>
        <locationX>958</locationX>
        <locationY>516</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>DiscountValidation</targetReference>
        </connector>
        <fields>
            <name>ScreenInstructions</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;em&gt;CONSTRUCT OPPORTUNITY&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;Please enter fee adjustments &amp;amp; add ons then click Construct Opportunity.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>TierPlanAndDesign</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(0, 0, 0);&quot;&gt;Tier Plan: {!Tier_Plan} {!fPlanChangeText}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;color: rgb(0, 0, 0);&quot;&gt;Website Design: {!Website_Design} {!fWebsiteDesignChangeText}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;color: rgb(0, 0, 0);&quot;&gt;Are you a floor discount approver?: {!fDiscountApproverText}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>ConstructDealPage_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>ConstructDealPage_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Fees</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(68, 68, 68);&quot;&gt;Setup Fee:&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Do_you_want_to_adjust_the_plan_setup_fee</name>
                    <choiceReferences>NoChoice</choiceReferences>
                    <choiceReferences>YesChoice</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <stringValue>Yes</stringValue>
                    </defaultValue>
                    <fieldText>Do you want to adjust the plan setup fee?</fieldText>
                    <fieldType>RadioButtons</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>One_Time_Fee</name>
                    <dataType>Currency</dataType>
                    <fieldText>One Time Fee ($)</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_plan_setup_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>OneTimeFeeFooter</name>
                    <fieldText>&lt;p&gt;&lt;em style=&quot;color: rgb(68, 68, 68);&quot;&gt;{!Tier_Plan} one-time fee list price is: ${!GetOneTimeListPrice.UnitPrice}&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;color: rgb(68, 68, 68);&quot;&gt;{!Tier_Plan} one-time fee discount floor is: ${!GetOneTimeListPrice.Discount_Approval_Floor__c}&lt;/em&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_plan_setup_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>ConstructDealPage_Section1_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>MonthlyFee</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;Monthly Fee:&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Do_you_want_to_adjust_the_monthly_plan_fee</name>
                    <choiceReferences>NoChoice</choiceReferences>
                    <choiceReferences>YesChoice</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <stringValue>Yes</stringValue>
                    </defaultValue>
                    <fieldText>Do you want to adjust the monthly plan fee?</fieldText>
                    <fieldType>RadioButtons</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Plan_Sales_Price</name>
                    <dataType>Currency</dataType>
                    <fieldText>Plan Sales Price ($)</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>DiscountForPlanFooter</name>
                    <fieldText>&lt;p&gt;&lt;em style=&quot;color: rgb(68, 68, 68);&quot;&gt;{!Tier_Plan} list price is: ${!GetPlanListPrice.UnitPrice}&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;em style=&quot;color: rgb(68, 68, 68);&quot;&gt;{!Tier_Plan} discount floor is: ${!GetPlanListPrice.Discount_Approval_Floor__c}&lt;/em&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Discount_for_Add_Ons_Selected</name>
                    <dataType>Number</dataType>
                    <fieldText>Discount (%) for Add Ons Selected</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>0</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>cHideFeatureOnScreens</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <booleanValue>false</booleanValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Select_Add_Ons_For_Discount</name>
                    <choiceReferences>AddOnPriceBookProductEntries</choiceReferences>
                    <dataType>String</dataType>
                    <fieldText>Select Add Ons</fieldText>
                    <fieldType>MultiSelectCheckboxes</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_adjust_the_monthly_plan_fee</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>Discount_for_Add_Ons_Selected</leftValueReference>
                            <operator>NotEqualTo</operator>
                        </conditions>
                        <conditions>
                            <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>cHideFeatureOnScreens</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <booleanValue>false</booleanValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>ConstructDealPage_Section1_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>AddOns</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;Add Ons:&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Do_you_want_to_include_Add_Ons</name>
                    <choiceReferences>NoChoice</choiceReferences>
                    <choiceReferences>YesChoice</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <stringValue>Yes</stringValue>
                    </defaultValue>
                    <fieldText>Do you want to include Add Ons?</fieldText>
                    <fieldType>RadioButtons</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>AddOnNote</name>
                    <fieldText>&lt;p&gt;&lt;em&gt;Only Add Ons that are available for the selected plan are displayed&lt;/em&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Select_Add_Ons</name>
                    <choiceReferences>AddOnPriceBookProductEntries</choiceReferences>
                    <dataType>String</dataType>
                    <fieldText>Select Add Ons</fieldText>
                    <fieldType>MultiSelectCheckboxes</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Do_you_want_to_include_Add_Ons</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Yes</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Construct Opportunity</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>DiscountApproval</name>
        <label>DiscountApproval</label>
        <locationX>1841</locationX>
        <locationY>246</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>DiscountApprovalMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0); background-color: rgb(255, 255, 255);&quot;&gt;You do not have permission to give a discount for Plan and/or Setup Fee below the floor value shown on previous screen.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0); background-color: rgb(255, 255, 255);&quot;&gt;Please reach out to an approver to enter values below the floor for you.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>DiscountValidationScreen</name>
        <label>DiscountValidationScreen</label>
        <locationX>1039</locationX>
        <locationY>159</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ValidationDiscountMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;You selected &quot;Yes&quot; for applying a discount, but did not enter proper discount information. Please return to previous screen and adjust.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>GetTierPlan_WebsiteType</name>
        <label>GetTierPlan&amp;WebsiteType</label>
        <locationX>384</locationX>
        <locationY>586</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <backButtonLabel>Cancel</backButtonLabel>
        <connector>
            <targetReference>SetPlanChangeIndicator</targetReference>
        </connector>
        <fields>
            <name>TierPlanInstructions</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;em&gt;CONSTRUCT A {!fPartnershipHeaderText} OPPORTUNITY&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;em&gt;Account Partnership Organization: &lt;/em&gt;{!GetOpptyRecord.Account.Partnership_Organization__c}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>GetTierPlan_WebsiteType_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>GetTierPlan_WebsiteType_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>TierPlanHeader</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;Plan Details:&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Website_Design</name>
                    <choiceReferences>WebsiteChoiceSet</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetOpptyRecord.Website_Design__c</elementReference>
                    </defaultValue>
                    <fieldText>Website Design</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Tier_Plan</name>
                    <choiceReferences>Launch</choiceReferences>
                    <choiceReferences>Base</choiceReferences>
                    <choiceReferences>Brand</choiceReferences>
                    <choiceReferences>Growth</choiceReferences>
                    <choiceReferences>Enterprise</choiceReferences>
                    <choiceReferences>LeadsPro</choiceReferences>
                    <choiceReferences>SEOPro</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetOpptyRecord.Tier_Plan__c</elementReference>
                    </defaultValue>
                    <fieldText>Tier Plan</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Provide Details</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>LineItemScreen</name>
        <label>LineItemScreen</label>
        <locationX>1854</locationX>
        <locationY>874</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>AddOnPriceValidator</targetReference>
        </connector>
        <fields>
            <name>LineItemInstruction</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 16px;&quot;&gt;Adding AddOns to Opportunity:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;em&gt;{!GetOpptyRecord.Name}&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 16px;&quot;&gt;&lt;em&gt;Enter sales (unit) price and quantity for:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;em&gt;{!GetSingleProductPriceBookEntry.Name}&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>AddOn_Sales_Price</name>
            <dataType>Currency</dataType>
            <defaultValue>
                <elementReference>GetSingleProductPriceBookEntry.UnitPrice</elementReference>
            </defaultValue>
            <fieldText>AddOn Sales Price ($)</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>SalesPriceHelp</name>
            <fieldText>&lt;p&gt;&lt;em&gt;AddOn list price of ${!GetSingleProductPriceBookEntry.UnitPrice} is default value&lt;/em&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>AddOn_Quantity</name>
            <dataType>Number</dataType>
            <defaultValue>
                <numberValue>1.0</numberValue>
            </defaultValue>
            <fieldText>AddOn Quantity</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>MLS_IDXCheckerScreen</name>
        <label>MLS-IDXCheckerScreen</label>
        <locationX>1267</locationX>
        <locationY>1843</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>MLSBoardErrorMessage</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0); font-size: 14px;&quot;&gt;You must create a MLS Board for each IDX Tool product in your opportunity.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;Please remember to add the appropriate amount of MLS Boards on the related list of this opportunity.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Number of MLS Boards: &lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;{!GetOpptyRecord.Number_of_MLS_Boards__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Number of IDX Tool Products: {!vIDXToolQuantityCount}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>PlanFeeInvalidScreen</name>
        <label>PlanFeeInvalidScreen</label>
        <locationX>1290</locationX>
        <locationY>132</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>PlanFeeInvalidMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0); background-color: rgb(255, 255, 255);&quot;&gt;The sales price you entered for either the plan or one-time fee is higher than the list price.  Please click Previous and adjust the value(s).&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>PlanPriceTooLowScreen</name>
        <label>PlanPriceTooLowScreen</label>
        <locationX>801</locationX>
        <locationY>50</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>PlanPriceTooLowScreenErrorMsg</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(255, 0, 0);&quot;&gt;The sales price you entered for the Plan is too low it must be greater than or equal to {!cPlanWithAdSpendMinPrice} which is the ad spend allocation. Please return to previous screen and adjust.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>174</locationY>
        <connector>
            <targetReference>GetOpptyRecord</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>AllIDsForDiscountLoop</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AllIDsForLoop</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vCommaSeperatedDiscountString</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vCommaSeperatedString</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vCounter</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>vDiscountToAddCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>vIDXToolQuantityCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>single record</description>
        <name>vOpptyProduct</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <description>multiple records</description>
        <name>vOpptyProductCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>vOpptyProductCollectionForDiscount</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>vOpptyProductForDiscount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>vSamePlan</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vSameWebsiteDesign</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
